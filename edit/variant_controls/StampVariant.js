import React, { useState, useEffect } from "react";
import { useVariants } from "../../hooks";

export default function StampVariant({ section }) {
  const [status, setStatus] = useState(false);

  const { createNewVariant } = useVariants();
  const handleClick = () => {
    const newName = { variantName: section.label };
    createNewVariant({ ...section, ...newName });
    setStatus(true)
  };

  useEffect(()=>{
    const timer = setTimeout(()=>{
      if(status){
        setStatus(false)
      }
    },3000)
    return () => clearTimeout(timer)
  },[status])

  return (
    <div className='relative'>
      <button className='active:bg-gray-200 rounded-full' onClick={handleClick}>
        {status ? <CheckMark /> : <Stamp />}
      </button>
    </div>
  );
}

const Stamp = () => {
  return (
    <svg
      className="text-sb-gray"
      width="14"
      height="14"
      viewBox="0 0 14 14"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        className="fill-current"
        d="M11.1018 9.05051H9.05088V8.64033C9.05088 8.12771 8.73569 7.68748 8.28903 7.50277C8.44434 6.57081 8.69352 5.69792 9.49576 4.29086C9.74136 3.86006 9.87119 3.36891 9.87119 2.87049C9.87119 1.28245 8.58185 -0.0118941 6.97259 8.24502e-05C5.5441 0.0107192 4.42175 1.05301 4.18227 2.30902C4.03409 3.08613 4.19608 3.8657 4.6385 4.50412C5.24526 5.3798 5.53759 6.46275 5.71092 7.50277C5.26426 7.68748 4.94907 8.12771 4.94907 8.64033V9.05051H2.89818C1.76733 9.05051 0.84729 9.97054 0.84729 11.1014V11.9491C0.84729 12.1756 1.03093 12.3593 1.25747 12.3593H1.66766V12.7695C1.66766 13.448 2.21967 14 2.89818 14H11.1017C11.7802 14 12.3323 13.448 12.3323 12.7695V12.3593H12.7425C12.969 12.3593 13.1527 12.1757 13.1527 11.9491V11.1014C13.1527 9.97054 12.2326 9.05051 11.1018 9.05051ZM5.31282 4.03692C4.99681 3.58086 4.8815 3.02179 4.98812 2.46269C5.15519 1.58654 5.95939 0.807571 7.0273 0.819356C8.15168 0.83177 9.05085 1.75284 9.05085 2.87049C9.05085 3.22667 8.95827 3.5773 8.7831 3.88454C7.92634 5.38721 7.65148 6.33806 7.47282 7.4098H6.52705C6.32952 6.2239 6.005 5.03587 5.31282 4.03692ZM8.23051 8.64033V9.05051H5.76944V8.64033C5.76944 8.41417 5.95343 8.23014 6.17962 8.23014H7.82033C8.04652 8.23017 8.23051 8.41417 8.23051 8.64033ZM11.512 12.7695C11.512 12.9956 11.328 13.1797 11.1018 13.1797H2.89821C2.67205 13.1797 2.48802 12.9957 2.48802 12.7695V12.3593H11.512V12.7695V12.7695ZM12.3323 11.5389C11.8593 11.5389 2.53541 11.5389 1.66768 11.5389V11.1014C1.66768 10.4229 2.2197 9.87088 2.89821 9.87088C3.09891 9.87088 10.1558 9.87088 11.1018 9.87088C11.7803 9.87088 12.3323 10.4229 12.3323 11.1014V11.5389Z"
      />
    </svg>
  );
};

const CheckMark = () => {
  return (
<svg className='text-sb-teal animation-dropdown' width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path className='fill-current' fillRule="evenodd" clipRule="evenodd" d="M7 0C10.8634 0 14 3.13658 14 7C14 10.8634 10.8634 14 7 14C3.13658 14 0 10.8634 0 7C0 3.13658 3.13658 0 7 0ZM7 0.583333C10.5414 0.583333 13.4167 3.45858 13.4167 7C13.4167 10.5414 10.5414 13.4167 7 13.4167C3.45858 13.4167 0.583333 10.5414 0.583333 7C0.583333 3.45858 3.45858 0.583333 7 0.583333ZM11.0833 4.93325L5.83042 10.5128L2.91667 7.09158L3.36058 6.713L5.852 9.639L10.6587 4.53367L11.0833 4.93325Z" />
</svg>

  );
};
